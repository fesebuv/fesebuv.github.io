


<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Video Test</title>

<style>

  video {
    width: 100%    !important;
    height: auto   !important;
  }

  #containervideo, 
  .container-video {
    display:none;
    width:100%;
    height:100%;
  }
  
  
  .box {
  margin: 0;
  background: #DDD;
  position: absolute;
  border-radius: 50%;
  top: 10px;
  right: 10px;
  width: 5%;
}



svg {
  display: block;
}

.close-x {
  stroke: black;
  fill: transparent;
  stroke-linecap: round;
  stroke-width: 5;
}


</style>

</head>

<body>

<div id="container-video1" class="container-video">
  <div class="box box-3 close">
    <svg viewbox="0 0 40 40">
      <path class="close-x" d="M 10,10 L 30,30 M 30,10 L 10,30" />
    </svg>
  </div>
  <video id="video1" controls>
    <source src="https://subscribe.allure.com/circulation/allure/media/4.15.16_Nick_v1.mp4" type="video/mp4">
  </video>
</div>


<div id="container-video2" class="container-video">
  <div class="box box-3">
    <svg viewbox="0 0 40 40">
      <path class="close-x" d="M 10,10 L 30,30 M 30,10 L 10,30" />
    </svg>
  </div>
  <video id="video2" controls>
    <source src="https://subscribe.allure.com/circulation/allure/media/__Grace_Hartzel_Final_4.14.161.mp4" type="video/mp4">
  </video>
</div>



<ul>
  <li>
    <a class="lnk-video" href="#" data-video="video2">Open Video1</a>
  </li>
  <li>
    <a class="lnk-video" href="#" data-video="video1">Open Video2</a>
  </li>
</ul>



<script src="https://subscribe.vogue.com/circulation/gq/scripts/jquery-1.8.2.min.js"></script>
<script>
  /*
  var lnk = document.getElementById('link');
  var container =document.getElementById("containervideo"); 
  var elem = document.getElementById("myvideo");

  function fullScreen(container, elem){
    container.style.display = 'block';
    if (elem.requestFullscreen) {
      elem.requestFullscreen();
    } else if (elem.msRequestFullscreen) {
      elem.msRequestFullscreen();
    } else if (elem.mozRequestFullScreen) {
      elem.mozRequestFullScreen();
    } else if (elem.webkitRequestFullscreen) {
      elem.webkitRequestFullscreen();
    }
    elem.play();
  }
  
  function exitFullScreen(){
    if (document.exitFullscreen) {
      document.exitFullscreen();
    } else if (document.msExitFullscreen) {
      document.msExitFullscreen();
    } else if (document.mozCancelFullScreen) {
      document.mozCancelFullScreen();
    } else if (document.webkitExitFullscreen) {
      document.webkitExitFullscreen();
    }
  }

  function test(){
    
    console.warn('test');
    var container =document.getElementById("containervideo"); 
    var elem = document.getElementById("myvideo");
    fullScreen(container, elem);
  }

  function endVideo(){
    container.style.display = 'none';
    elem.load();
    exitFullScreen();
  }
  
  function pauseVideo() { 
    console.log('video paused');
    if (!elem.webkitDisplayingFullscreen)
        endVideo(); 
    }

  
  function test1(evt){
    console.info('keypress');
    if(evt.which === 13){
     console.log("user pressed done");
     endVideo();
    } 
  }
  
  
  lnk.addEventListener("click", test, false);
  elem.addEventListener('ended', endVideo, false);
  elem.addEventListener('pause', pauseVideo, false);
  document.addEventListener('keypress', test1, false);
  */

  
</script>

<script>
var html5Video = function () {
  
  var video,
    container;
  
  function _exitFullScreen() {
    if (document.exitFullscreen) {
      document.exitFullscreen();
    } else if (document.msExitFullscreen) {
      document.msExitFullscreen();
    } else if (document.mozCancelFullScreen) {
      document.mozCancelFullScreen();
    } else if (document.webkitExitFullscreen) {
      document.webkitExitFullscreen();
    }
  }
  
  function _fullScreen() {
    var vid = video;
    if (vid.requestFullscreen) {
      vid.requestFullscreen();
    } else if (vid.msRequestFullscreen) {
      vid.msRequestFullscreen();
    } else if (vid.mozRequestFullScreen) {
      vid.mozRequestFullScreen();
    } else if (vid.webkitRequestFullscreen) {
      vid.webkitRequestFullscreen();
    }
  }
  
  function _endVideo() {
    var vid = video;
    $(container).hide();
    video.load();
    _exitFullScreen();
  }
  function _pauseVideo() {
    var vid = video;
    if (!vid.webkitDisplayingFullscreen)
    _endVideo();
  }
  
  
  function _fullScreen() {
    var vid = video;
    if (vid.requestFullscreen) {
      vid.requestFullscreen();
    } else if (vid.msRequestFullscreen) {
      vid.msRequestFullscreen();
    } else if (vid.mozRequestFullScreen) {
      vid.mozRequestFullScreen();
    } else if (vid.webkitRequestFullscreen) {
      vid.webkitRequestFullscreen();
    }
  }
  
  function init(videoId) {
    console.info(videoId);
    video = document.getElementById(videoId);
    container = document.getElementById('container-' + videoId);
    console.info(video);
    console.log(container);
    video.addEventListener('ended', _endVideo, false);
    video.addEventListener('pause', _pauseVideo, false);
    $(container).show();
    $(container).find('.close').click(function(){
      _endVideo();
    })
    video.play();
    _fullScreen();
    
    console.info($(container).fid('.close'));
    
  }
  return {
    init: init
  };
}();



$('.lnk-video').click(function (evt) {
  evt.preventDefault();
  console.info('click href');
  var videoId = this.getAttribute('data-video');
  console.info(videoId);
  // var video = document.getElementById(videoId);
  var vid = html5Video.init(videoId);
});

</script>


</body>

</html>
