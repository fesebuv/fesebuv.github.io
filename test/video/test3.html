


<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Video Test</title>

<style>
  #containervideo, 
  .container-video {
    display:none;
  }
</style>

</head>

<body>
<div id="containervideo">
  <video id="myvideo" controls>
    <!-- <source src="https://subscribe.allure.com/circulation/allure/media/__Grace_Hartzel_Final_4.14.161.mp4" type="video/mp4"> -->
    <source src="https://subscribe.allure.com/circulation/allure/media/4.15.16_Nick_v1.mp4" type="video/mp4">
  </video>
</div>


<a id="link" href="#">video</a>

<div id="container-video2" class="container-video">
  <video id="video2" controls>
    <source src="https://subscribe.allure.com/circulation/allure/media/__Grace_Hartzel_Final_4.14.161.mp4" type="video/mp4">
  </video>
</div>

<a class="lnk-video" href="#" data-video="video2">Open Video</a>




<script src="https://subscribe.vogue.com/circulation/gq/scripts/jquery-1.8.2.min.js"></script>
<script>

  var lnk = document.getElementById('link');
  var container =document.getElementById("containervideo"); 
  var elem = document.getElementById("myvideo");

  function fullScreen(container, elem){
    container.style.display = 'block';
    if (elem.requestFullscreen) {
      elem.requestFullscreen();
    } else if (elem.msRequestFullscreen) {
      elem.msRequestFullscreen();
    } else if (elem.mozRequestFullScreen) {
      elem.mozRequestFullScreen();
    } else if (elem.webkitRequestFullscreen) {
      elem.webkitRequestFullscreen();
    }
    elem.play();
  }
  
  function exitFullScreen(){
    if (document.exitFullscreen) {
      document.exitFullscreen();
    } else if (document.msExitFullscreen) {
      document.msExitFullscreen();
    } else if (document.mozCancelFullScreen) {
      document.mozCancelFullScreen();
    } else if (document.webkitExitFullscreen) {
      document.webkitExitFullscreen();
    }
  }

  function test(){
    
    console.warn('test');
    var container =document.getElementById("containervideo"); 
    var elem = document.getElementById("myvideo");
    fullScreen(container, elem);
  }

  function endVideo(){
    container.style.display = 'none';
    elem.load();
    exitFullScreen();
  }
  
  function pauseVideo() { 
    console.log('video paused');
    if (!elem.webkitDisplayingFullscreen)
        endVideo(); 
    }

  
  function test1(evt){
    console.info('keypress');
    if(evt.which === 13){
     console.log("user pressed done");
     endVideo();
    } 
  }
  
  
  lnk.addEventListener("click", test, false);
  elem.addEventListener('ended', endVideo, false);
  elem.addEventListener('pause', pauseVideo, false);
  document.addEventListener('keypress', test1, false);


  var html5Video = function(){
    
    function init(){
      console.info('init');
      
      $('.lnk-video').click(function(){
        console.info('click href');
        
        var videoId = this.getAttribute('data-video');
        
        console.info(videoId);
        
        var video = document.getElementById(videoId);
        
        video.bind('pause', function(){
          console.warn('video paused');
        });
        
      });
      
    }
    
    return {
      init: init
    };
    
  }();

html5Video.init();
  
</script>

</body>

</html>
