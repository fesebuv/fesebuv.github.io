Hello World


<button onclick="openWindow()" target="_blank">Pop Up Window</button>


<script>
  var ref;
  var interval;
  var domain = 'http://fesebuv.github.io';
  
  function openWindow(){
    ref = window.open('popup.html', '_blank');
    setMessage();
  }
  
  function setMessage(){
		
		//periodical message sender

		interval = window.setInterval(function(){
			var message = 'Hello!  The time is: ' + (new Date().getTime());
			console.log('blog.local:  sending message:  ' + message);
			ref.postMessage(message,domain); //send the message and target URI
		},600);
}

//listen to holla back
window.addEventListener('message',function(event) {
	if(event.origin !== 'http://fesebuv.github.io') return;
	console.log('received response:  ',event.data);
	window.clearInterval(interval);
	ref.close();
},false);

</script>
