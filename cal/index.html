<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>cal</title>
</head>

<body>

<iframe id="calendar" src="" style="border: 0" width="800" height="600" frameborder="0" scrolling="no"></iframe>

<div id="tz" style="display:none;">
  <select id="zones">
    <option value="America/Los_Angeles">LA</option>
    <option value="America/New_York">NYC</option>
  </select>
</div>

<script>
(function () {
  function checkIframeLoaded() {
    var iframe = document.getElementById('calendar');
    var iframeDoc = typeof iframe !== null && iframe.contentDocument || iframe.contentWindow.document;
    console.info(iframeDoc.readyState);
    if (iframeDoc.readyState == 'complete') {
      iframe.contentWindow.onload = function () {
        var elem = document.getElementById('tz');
        console.info('elem');
        elem.style.display = 'block';
      };
      //afterLoading();
      return;
    }
    
  }
  function loadIframe() {
    var location = 'America/Los_Angeles';
    var src = 'https://calendar.google.com/calendar/embed?src=ilr6oeh0bnaajps2odvh8k65so%40group.calendar.google.com&ctz=' + location;
    iframe = document.getElementById('calendar');
    iframe.src = src;
    var zones = document.getElementById('zones');
    zones.onchange = function (elem) {
      console.info(this.value);
      var location = this.value || 'America/Los_Angeles';
      var src = 'https://calendar.google.com/calendar/embed?src=ilr6oeh0bnaajps2odvh8k65so%40group.calendar.google.com&ctz=' + location;
      iframe = document.getElementById('calendar');
      iframe.src = src;
    }
    checkIframeLoaded();
  }
  loadIframe();
}) ();

</script>

</body>

</html>
